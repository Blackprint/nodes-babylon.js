/* MIT Licensed */
function _classPrivateFieldLooseBase(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var id=0;function _classPrivateFieldLooseKey(e){return"__private_"+id+++"_"+e}!async function(e,t,n,s,i,o,r,a){"use strict";if(t.exports&&t.exports!==globalThis&&Object.defineProperty(t.exports,"__esModule",{value:!0}),!e.Blackprint.Environment.isBrowser)return void console.log("@blackprint/nodes-babylon.js is only for browser, nodes will not be registered");let l=e.Blackprint.loadScope({url:import.meta.url,hasInterface:!0,hasDocs:!0}),c=["https://cdn.jsdelivr.net/npm/babylonjs@5.0.0-beta.4/babylon.min.js","https://cdn.jsdelivr.net/npm/babylonjs-loaders@5.0.0-beta.4/babylonjs.loaders.min.js"];if(null!=globalThis.sf)await sf.loader.js(c,{ordered:!0});else for(var p=0;p<c.length;p++)await import(c[p]);let u=l.createContext("Babylon.js");u.EventSlot={slot:"my-private-event-slot"},l.registerNode("Babylon.js/Scene/Create",((n=class extends l.Node{constructor(e){super(e),this.renderLoop=null,this.partialUpdate=!0,this.setInterface().title="Scene"}update(){let{IInput:e,Input:t,Output:n}=this.ref;null!=e.Engine&&(n.Scene=new BABYLON.Scene(t.Engine))}destroy(){let{Input:e,Output:t}=this.ref;null!=t.Scene&&(this.ref.Input.Pause(),this.ref.Output.Scene.dispose())}}).input={Engine:BABYLON.Engine,Render:l.Port.Trigger((function({iface:e}){let t=e.node;if(null!==t.renderLoop)return;let n=t.output.Scene;if(void 0===n)throw new Error("Scene was not found");t.renderLoop=()=>{n.render()},t.input.Engine.runRenderLoop(t.renderLoop)})),Pause:l.Port.Trigger((function({iface:e}){let t=e.node;null!==t.renderLoop&&(t.input.Engine.stopRenderLoop(t.renderLoop),t.renderLoop=null)}))},n.output={Scene:BABYLON.Scene},n)),l.registerNode("Babylon.js/Engine/Create/Canvas",((s=class extends l.Node{constructor(e){super(e);let t=this.setInterface("BPIC/Babylon.js/Engine/Create/Canvas");t.title="Canvas",t.description="Babylon.js canvas"}}).output={Engine:BABYLON.Engine,Canvas:HTMLCanvasElement},s)),l.registerInterface("BPIC/Babylon.js/Engine/Create/Canvas",u.IFace.EngineCreateCanvas=class extends l.Interface{constructor(e){super(e);let t=this.canvas=document.createElement("canvas");t.touchAction="none",t.width=360,t.height=240}imported(){let e=this.ref.Output;e.Canvas=this.canvas,e.Engine=new BABYLON.Engine(e.Canvas,!1)}destroy(){this.ref.Output.Engine.dispose()}}),l.registerNode("Babylon.js/Scene/Camera/Free",((i=class extends l.Node{constructor(e){super(e),this.partialUpdate=!0;let t=this.setInterface();t.title="Free Camera",t.data=new B(t)}init(){let{IInput:e,Input:t,Output:n}=this.ref;e.Scene.on("connect",(()=>{let s=this.iface.data;n.Camera?.dispose(),(n.Camera=new BABYLON.FreeCamera("FreeCamera",s.position,t.Scene)).setTarget(BABYLON.Vector3.Zero()),null!=t.Attach&&n.Camera.attachControl(t.Attach,!0),e.Scene.once("disconnect",(()=>{n.Camera.dispose()}))})),e.Attach.on("connect",(()=>{let s=t.Attach;null!=n.Camera&&n.Camera.attachControl(s,!0),e.Attach.once("disconnect",(function(){n.Camera.detachControl(s)}))}))}destroy(){let{Input:e,Output:t}=this.ref;t.Camera?.dispose()}}).input={Scene:BABYLON.Scene,Position:BABYLON.Vector3,Attach:HTMLCanvasElement},i.output={Camera:BABYLON.Camera},i));var d=_classPrivateFieldLooseKey("iface"),h=_classPrivateFieldLooseKey("position");class B{constructor(e){Object.defineProperty(this,d,{writable:!0,value:null}),Object.defineProperty(this,h,{writable:!0,value:""}),_classPrivateFieldLooseBase(this,d)[d]=e,_classPrivateFieldLooseBase(this,h)[h]=new BABYLON.Vector3(0,5,-10)}get position(){return _classPrivateFieldLooseBase(this,h)[h]}set position(e){3===(e=e.replace(/ /g,"").split(",")).length&&(_classPrivateFieldLooseBase(this,h)[h]=new BABYLON.Vector3(...e))}}l.utils.setEnumerablePrototype(B,{position:!0}),l.registerNode("Babylon.js/Scene/Light/Hemispheric",((o=class extends l.Node{constructor(e){super(e),this.partialUpdate=!0;let t=this.setInterface();t.title="Hemispheric Light",t.data=new g(t)}init(){let{IInput:e,Input:t,Output:n}=this.ref;e.Scene.on("connect",(()=>{let s=this.iface.data;n.Light?.dispose(),n.Light=new BABYLON.HemisphericLight("HemisphericLight",s.position,t.Scene),n.Light.intensity=t.Intensity,e.Scene.once("disconnect",(()=>{n.Light.dispose()}))}))}update(){let{IInput:e,Input:t,Output:n}=this.ref;null!=n.Light&&(n.Light.intensity=t.Intensity)}destroy(){let{Input:e,Output:t}=this.ref;t.Light?.dispose()}}).input={Scene:BABYLON.Scene,Position:BABYLON.Vector3,Intensity:l.Port.Default(Number,1)},o.output={Light:BABYLON.Light},o));var L=_classPrivateFieldLooseKey("iface"),f=_classPrivateFieldLooseKey("position");class g{constructor(e){Object.defineProperty(this,L,{writable:!0,value:null}),Object.defineProperty(this,f,{writable:!0,value:""}),_classPrivateFieldLooseBase(this,L)[L]=e,_classPrivateFieldLooseBase(this,f)[f]=new BABYLON.Vector3(0,5,-10)}get position(){return _classPrivateFieldLooseBase(this,f)[f]}set position(e){3===(e=e.replace(/ /g,"").split(",")).length&&(_classPrivateFieldLooseBase(this,f)[f]=new BABYLON.Vector3(...e))}}l.utils.setEnumerablePrototype(g,{position:!0}),l.registerNode("Babylon.js/Scene/Mesh/Ground",((r=class extends l.Node{constructor(e){super(e),this.partialUpdate=!0;let t=this.setInterface();t.title="Ground Mesh",t.data={x:0,y:0,z:0,width:6,height:6}}init(){let{IInput:e,Input:t,Output:n}=this.ref;e.Scene.on("connect",(()=>{let s=this.iface.data;n.Mesh?.dispose(),n.Mesh=new BABYLON.CreateGround("GroundMesh",{width:s.width,height:s.height},t.Scene),e.Scene.once("disconnect",(()=>{n.Mesh.dispose()}))}))}destroy(){let{Input:e,Output:t}=this.ref;t.Mesh?.dispose()}}).input={Scene:BABYLON.Scene},r.output={Mesh:BABYLON.Mesh},r)),l.registerNode("Babylon.js/Scene/Mesh/Sphere",((a=class extends l.Node{constructor(e){super(e),this.partialUpdate=!0;let t=this.setInterface();t.title="Sphere Mesh",t.data={x:0,y:0,z:0,diameter:1,segments:16}}init(){let{IInput:e,Input:t,Output:n}=this.ref;e.Scene.on("connect",(()=>{let s=this.iface.data;n.Mesh?.dispose(),n.Mesh=new BABYLON.CreateSphere("SphereMesh",{diameter:s.diameter,segments:s.segments},t.Scene),e.Scene.once("disconnect",(()=>{n.Mesh.dispose()}))}))}destroy(){let{Input:e,Output:t}=this.ref;t.Mesh?.dispose()}}).input={Scene:BABYLON.Scene},a.output={Mesh:BABYLON.Mesh},a))}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:this,"undefined"!=typeof module?module:{exports:this});
//# sourceMappingURL=nodes-babylonjs.mjs.map